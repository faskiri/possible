(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1789:function(e,n,t){Promise.resolve().then(t.bind(t,963))},8256:function(e,n,t){"use strict";t.d(n,{V:function(){return r}});let r={CLIENT_ID:"177687399588-lmqkblbpb36m3ujr61r16pga5tjtd18s.apps.googleusercontent.com",ORGANIZATION:"Fe Lounge",WEBSITE_DESCRIPTION:"Sales assistant",CURRENCY_CODE:"â‚¹",MENU_FILE_NAME:"Public Menu",MENU_SHEET_NAME:"Published Version"}},963:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return O}});var r=t(7437),s=t(2265),i=t(6548),o=t(270),c=t(2197),a=t(8929),l=t(6645),d=t(8884),h=t(2674),u=t(511),x=t(4691),j=t(7116),p=t(6351),f=t(359),Z=t(335),g=t(2326),C=t(1066),m=t(9806),v=t(5253),E=t(7590),y=t(1665),N=t(8256);function w(){return(0,r.jsxs)(u.Z,{variant:"body2",color:"text.secondary",align:"center",children:["Copyright \xa9 ",(0,r.jsx)(y.Z,{color:"inherit",children:N.V.ORGANIZATION})," ",new Date().getFullYear(),"."]})}var _=t(9504),b=t(1733),k=t(1326),I=t(7163);function A(){return(0,r.jsx)(k.Z,{sx:{flexGrow:1},children:(0,r.jsx)(b.Z,{position:"static",children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(Z.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(u.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Menu"}),(0,r.jsx)(I.T,{})]})})})}var S=t(9934),T=t(2502);function M(e){let{accessToken:n}=(0,s.useContext)(I.V),[t,o]=(0,s.useState)(""),c=()=>{o("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{color:"inherit",onClick:()=>(function(){let t=N.V.MENU_FILE_NAME,r=N.V.MENU_SHEET_NAME,s="'".concat(r,"'!A1:C100");fetch("".concat("https://www.googleapis.com/drive/v3/files","?q=mimeType='").concat("application/vnd.google-apps.spreadsheet","' and name='").concat(t,"'"),{headers:{Authorization:"Bearer "+n}}).then(i=>{i.json().then(i=>{if(1!=i.files.length){o("Please ensure to create a single file named '".concat(t,"', found: ").concat(i.files.length," files"));return}let c=i.files[0].id;fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(c,"/values/").concat(s),{headers:{Authorization:"Bearer "+n}}).then(n=>{n.json().then(n=>{let s=n.values;if(s.length<2||s>99){o("Please ensure that there is a sheet named ".concat(r," in the spreadsheet ").concat(t," with at least 1 row and no more than 99, found ").concat(s.length," rows"));return}var i=[];for(let e=1;e<s.length;e++)i.push({id:e,name:s[e][0],description:s[e][1],price:Number(s[e][2])});e.onSuccess(i)})})})}).catch(e=>{o("Could not read from the spreadsheet ".concat(t,", error: ").concat(e.json()))})})(),style:{display:""!=n?"block":"none"},children:"Refresh Menu"}),(0,r.jsx)(S.Z,{open:""!=t,autoHideDuration:6e3,onClose:c,children:(0,r.jsx)(T.Z,{onClose:c,variant:"filled",severity:"error",children:t})})]})}function O(){let[e,n]=(0,s.useState)(""),[t,y]=(0,s.useState)([]),_=t.filter(n=>{let t=e.toLowerCase();return n.name.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)}),b=(e,n)=>{y(t=>t.map(t=>e===t.id?{...t,quantity:Math.max(0,n+t.quantity)}:t))},k=()=>y(e=>e.map(e=>({...e,quantity:0})));return(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(A,{}),(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(m.Z,{sx:{height:96,display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(C.Z,{value:e,onChange:e=>{n(e.target.value)},placeholder:"Search item...",startAdornment:(0,r.jsx)(g.Z,{position:"start"})}),(0,r.jsx)(M,{onSuccess:e=>{y(e.map(e=>({...e,quantity:0})))}})]}),(0,r.jsx)(h.Z,{children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(x.Z,{children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(p.Z,{sx:{width:"75%"},children:"Name"}),(0,r.jsx)(p.Z,{children:"Price"}),(0,r.jsx)(p.Z,{})]})}),(0,r.jsx)(d.Z,{children:_.map(e=>(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(u.Z,{variant:"body1",children:e.name}),(0,r.jsx)(u.Z,{variant:"caption",children:e.description})]}),(0,r.jsx)(p.Z,{children:"".concat(N.V.CURRENCY_CODE," ").concat(e.price.toFixed(2))}),(0,r.jsx)(p.Z,{children:(0,r.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"right",children:[(0,r.jsx)(Z.Z,{onClick:()=>b(e.id,-1),children:(0,r.jsx)(E.Z,{})}),(0,r.jsx)(u.Z,{variant:"body2",children:e.quantity}),(0,r.jsx)(Z.Z,{onClick:()=>b(e.id,1),children:(0,r.jsx)(v.Z,{})})]})})]},e.id))}),(0,r.jsx)(f.Z,{children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(p.Z,{sx:{fontWeight:"bold"},variant:"body",children:"Total:"}),(0,r.jsx)(p.Z,{sx:{fontWeight:"bold"},variant:"body",children:"".concat(N.V.CURRENCY_CODE," ").concat(t.reduce((e,n)=>e+n.price*n.quantity,0).toFixed(2))}),(0,r.jsxs)(p.Z,{style:{textAlign:"right"},children:[" ",(0,r.jsx)(i.Z,{variant:"contained",color:"error",onClick:()=>k(),children:"Clear Cart"})]})]})})]})})]}),(0,r.jsx)(w,{})]})}},7163:function(e,n,t){"use strict";t.d(n,{T:function(){return u},V:function(){return d},default:function(){return h}});var r=t(7437),s=t(9934),i=t(2502),o=t(6548),c=t(8735),a=t(8256),l=t(2265);let d=(0,l.createContext)({accessToken:"",setAccessToken:e=>{}});function h(e){let[n,t]=(0,l.useState)("");return(0,r.jsx)(c.rg,{clientId:a.V.CLIENT_ID,children:(0,r.jsx)(d.Provider,{value:{accessToken:n,setAccessToken:t},children:e.children})})}function u(){let{accessToken:e,setAccessToken:n}=(0,l.useContext)(d),[t,a]=(0,l.useState)(""),h=()=>{a("")},u=(0,c.Nq)({scope:"https://www.googleapis.com/auth/spreadsheets.readonly https://www.googleapis.com/auth/drive.metadata.readonly",onSuccess:e=>{n(e.access_token)},onError:e=>a("Could not authorize: "+(e.error_description||e.error))});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{color:"inherit",onClick:()=>u(),style:{display:""==e?"block":"none"},children:"Login"}),(0,r.jsx)(s.Z,{open:""!=t,autoHideDuration:12e3,onClose:h,children:(0,r.jsx)(i.Z,{onClose:h,variant:"filled",severity:"error",children:t})})]})}}},function(e){e.O(0,[298,749,971,23,744],function(){return e(e.s=1789)}),_N_E=e.O()}]);